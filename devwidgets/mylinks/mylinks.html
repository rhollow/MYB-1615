<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/mylinks/css/mylinks.css"/>

<div class="mylinks_widget">
  <div class="fl-widget-content s3d-widget-content">
    <!-- MAIN PANEL: List of links and categories. -->
    <div class="link_list">
      <div id="accordion"><!-- filled by trimpath --></div>


      <div id="accordion_template" style="display:none;"><!--

          {var idx = 0}
          {var systemProperty = /^_/}
          {for section in sections}
            {if ! ( section_index.match(systemProperty) ) }
              {if idx == activeSection}
              <div class="accordion_pane accordion_open" id="mylinks_section_${idx}">
              {else}  
              <div class="accordion_pane" id="mylinks_section_${idx}">
              {/if}
                <div class="section_label">${section.label}</div>
                <div class="accordion_content {if section.isEditable} mylinks_section{/if}">
                  <ul>
  
                  {var i = 0}
  
                    {for link in section.links}
  
                      <li class="link featuredcontent_content featuredcontent_content_medium">
                          <a href="${link.url}"
                            id="${link.id}"
                            target="_blank"
                            title="${link.popup_description}">${link.name|default:"no name"}</a>
                            {if section.isEditable}
                              <div class="edit_buttons">
                                <div class="icon_button delete_icon" id="mylinks_delete_${i}"><span class="fl-offScreen-hidden">Delete link: ${link.name|default:"no name"}</div>
                                <div class="icon_button edit_icon" id="mylinks_edit_${i}"><span class="fl-offScreen-hidden">Edit link: ${link.name|default:"no name"}</div>
                              </div>
                            {/if}
  
                      </li>
  
                      {eval}
                        i = i + 1
                      {/eval}
                    {forelse}
                      <div class="no_links_message">There are no links in this section yet.</div>
                    {/for}
                  </ul>
                </div>
              </div>

              {eval}
                idx = idx + 1
              {/eval}
            {/if}
          {/for}

      --></div>

    </div>

    <!-- ADD/EDIT LINK PANEL: Allows user to add a new link or edit an existing link. -->
    <div class="addedit_link_panel">
        <form id="mylinks-form" class="link-form" action="" method="post">
            <h2 class="addedit_link_panel_title s3d-addlink-header">Add link</h2>
            <div class="link-form-element">
                <label class="elm-label" for="link-title">Link Title:</label>
                <input type="text" id="link-title" name="link-title" aria-required="true" />
            </div>
            <div class="link-form-element">
                <label class="elm-label" for="link-url">Link URL:</label>
                <input type="text" id="link-url" name="link-url" aria-required="true" />
            </div>
        </form>
      
        <div class="button-list">
            <button id="cancel-button" class="s3d-link-button s3d-bold">Cancel</button>
            <button id="addlink-button" class="s3d-button s3d-button-link-2-state"><span class="s3d-button-inner s3d-button-link-2-state-inner">Add Link</span></button>
            <button id="savelink-button" class="s3d-button s3d-button-link-2-state"><span class="s3d-button-inner s3d-button-link-2-state-inner">Save</span></button>
        </div>
    </div>
  </div>

  <div class="s3d-widget-footer">
      <a class="s3d-widget-links" href="javascript: void(0);" id="add-link-mode">Add a Link</a>
  </div>

</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/mylinks/javascript/mylinks.js"></script>
